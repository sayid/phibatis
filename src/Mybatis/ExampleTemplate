<?php
namespace  #{EntityMameSpace};

use Sayid\Table2Model\DBTool;
use Illuminate\Database\Query\Builder;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Collection;
use #{EntityMameSpace}/#{EntityName} as Entity;

class #{EntityName}Example
{
    private string $prikey = "#{PriKey}";

    private static string $tableName = "#{TableName}";

    private Builder $builder;

    public function __construct()
    {
        $this->builder = DBTool::getBuilder($this::getTable(), Entity::class);
    }

    public static function getTable()
    {
        return self::$tableName;
    }

    public function getBuilder() : Builder
    {
        return $this->builder;
    }

    public function getOne() : Entity
    {
        return $this->builder->first();
    }

    /**
    * 获取列表结果
    */
    public function getList()
    {
       return $this->builder->first();
    }

    public function count()
    {
        return $this->builder->count();
    }

    public function orderBy(string $field, string $type) : Builder
    {
        $this->builder->orderby($field, $type);
        return $this;
    }
    public function forPage(int $page, int $limit) : Builder
    {
        $this->builder->forPage($page, $limit);
        return $this;
    }

    public function insert(array $data)
    {
        DB::table(self::getTable())->insert($data);
    }

    public function inserts(array $data)
    {
        DB::table(self::getTable())->insert($data);
    }

    public function orWhere(\Closure $closure)
    {
        $this->builder->orWhere($closure);
        return $this;
    }

    #{Where}

}
